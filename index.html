<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í•˜ì§„ë´‡</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase (Google + ìì²´ ID) -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  height:100vh;
  display:flex;
  background:linear-gradient(135deg,#5f7cff,#8fd3f4);
}
#sidebar{
  width:250px;
  padding:16px;
  background:rgba(255,255,255,0.2);
  backdrop-filter:blur(10px);
}
#main{flex:1;display:flex;flex-direction:column}
#start{
  flex:1;display:flex;flex-direction:column;
  justify-content:center;align-items:center;color:white;
}
#chat-screen{display:none;flex:1;flex-direction:column}
#chat{flex:1;padding:16px;overflow-y:auto}
.bubble{padding:12px 16px;border-radius:18px;margin:6px 0;max-width:70%}
.user{background:#4d6df0;color:white;margin-left:auto}
.bot{background:#f1f1f1}
#input-box{display:flex;padding:10px;background:white}
#input{flex:1;padding:12px;border-radius:10px;border:1px solid #ccc}
button{margin-left:6px;padding:12px;border:none;border-radius:10px}
</style>
</head>

<body>

<div id="sidebar">
  <h2>ğŸ¤– í•˜ì§„ë´‡</h2>
  <button onclick="newChat()">â• ìƒˆ ì±„íŒ…</button>
  <button onclick="googleLogin()">Google ë¡œê·¸ì¸</button>
  <button onclick="emailLogin()">í•˜ì§„ë´‡ ID</button>
  <button onclick="naverLogin()">ë„¤ì´ë²„ ë¡œê·¸ì¸</button>
</div>

<div id="main">
  <div id="start">
    <h1>í•˜ì§„ë´‡</h1>
    <p>AIì—ê²Œ ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”</p>
  </div>

  <div id="chat-screen">
    <div id="chat"></div>
    <div id="input-box">
      <input id="input" placeholder="ì—”í„°ë¡œ ì „ì†¡"
        onkeydown="if(event.key==='Enter') send()">
      <button onclick="send()">ì „ì†¡</button>
    </div>
  </div>
</div>

<script>
/* Firebase */
firebase.initializeApp({
  apiKey: "YOUR_FIREBASE_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com"
});
const auth = firebase.auth();

let chats = [];
function newChat(){
  chats=[];
  document.getElementById("chat").innerHTML="";
  openChat();
}
function openChat(){
  document.getElementById("start").style.display="none";
  document.getElementById("chat-screen").style.display="flex";
}
function addBubble(role,text){
  const d=document.createElement("div");
  d.className="bubble "+role;
  d.innerText=text;
  document.getElementById("chat").appendChild(d);
}

async function send(){
  const i=document.getElementById("input");
  const text=i.value.trim();
  if(!text) return;
  i.value="";
  openChat();
  addBubble("user",text);

  const res = await fetch("https://YOUR-SERVER.onrender.com/chat",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ message:text })
  });
  const data = await res.json();
  addBubble("bot",data.reply);
}

/* ë¡œê·¸ì¸ */
function googleLogin(){
  auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
}
function emailLogin(){
  const e=prompt("ì´ë©”ì¼"), p=prompt("ë¹„ë°€ë²ˆí˜¸");
  auth.signInWithEmailAndPassword(e,p)
    .catch(()=>auth.createUserWithEmailAndPassword(e,p));
}
function naverLogin(){
  location.href="https://YOUR-SERVER.onrender.com/naver/login";
}
</script>

</body>
</html>
